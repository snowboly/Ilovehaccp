{
  "version": "1.0.0",
  "locked": true,
  "section": "CCP Determination",
  "scope": "per_significant_hazard",
  "logic_source": "Codex Alimentarius Decision Tree",
  "questions": [
    {
      "id": "q1_control_measure",
      "text": "Is there a control measure for the identified hazard at this step?",
      "tooltip": "A Control Measure is any action and activity that can be used to prevent or eliminate a food safety hazard or reduce it to an acceptable level. If none exists here, you may need to modify the process.",
      "type": "boolean",
      "required": true,
      "justification": {
        "placeholder": "e.g., Temperature control during cooking ensures pathogen kill; supplier CoA verifies absence of contaminant"
      }
    },
    {
      "id": "q2_step_designed_to_eliminate",
      "text": "Is this step specifically designed to KILL or REMOVE the hazard?",
      "tooltip": "Answer YES for: Cooking (>75°C), Pasteurization, Disinfection, Metal Detection. Answer NO for: Refrigeration, Freezing, Washing (without sanitizer) or Supplier Checks. (Why? Because cooling only SLOWS growth, it doesn't kill bacteria).",
      "type": "boolean",
      "required": true,
      "justification": {
        "placeholder": "e.g., Cooking to 75 °C core kills vegetative pathogens; metal detector removes physical hazards"
      }
    },
    {
      "id": "q3_contamination_possible",
      "text": "Could contamination with the hazard occur at this step, or could it increase to unacceptable levels?",
      "tooltip": "If the hazard is not likely to increase or occur here, this might not be a CCP.",
      "type": "boolean",
      "required": true,
      "justification": {
        "placeholder": "e.g., Temperature abuse during holding could allow bacterial growth above safe limits"
      }
    },
    {
      "id": "q4_subsequent_step",
      "text": "Will a subsequent step eliminate or reduce the hazard to an acceptable level?",
      "tooltip": "If a later step (e.g. cooking later on) will kill the bacteria, then THIS step is likely not a CCP for that hazard.",
      "type": "boolean",
      "required": true,
      "justification": {
        "placeholder": "e.g., Cooking step later in process will achieve >75 °C core temperature, eliminating this hazard"
      }
    }
  ],
  "outcome_logic": [
    {
      "conditions": { "q1_control_measure": false },
      "outcome": "Not a CCP"
    },
    {
      "conditions": { "q2_step_designed_to_eliminate": true },
      "outcome": "CCP"
    },
    {
      "conditions": {
        "q2_step_designed_to_eliminate": false,
        "q3_contamination_possible": true,
        "q4_subsequent_step": false
      },
      "outcome": "CCP"
    },
    {
      "conditions": {
        "q2_step_designed_to_eliminate": false,
        "q4_subsequent_step": true
      },
      "outcome": "Not a CCP"
    },
    {
      "conditions": "default",
      "outcome": "OPRP"
    }
  ]
}

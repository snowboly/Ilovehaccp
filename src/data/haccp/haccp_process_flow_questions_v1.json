{
  "version": "1.0.0",
  "locked": true,
  "section": "Process Flow Diagram",
  "questions": [
    {
      "id": "diagram_created",
      "text": "Have you created a complete process flow diagram?",
      "type": "boolean",
      "required": true,
      "validation": {
        "prevent_proceed_on": false,
        "error_message": "A complete process flow diagram is required to continue according to Codex Step 4."
      }
    },
    {
      "id": "process_steps",
      "text": "List all process steps in the order they occur.",
      "tooltip": "Distinct steps help identify hazards accurately. Examples: 'Goods In', 'Dry Storage', 'Chilled Storage', 'Preparation', 'Cooking', 'Cooling', 'Reheating', 'Plating/Service'.",
      "type": "repeatable_list",
      "required": true,
      "min_items": 1,
      "item_schema": {
        "fields": [
          {
            "id": "step_id",
            "text": "Step ID",
            "type": "hidden_auto_id"
          },
          {
            "id": "step_name",
            "text": "Step name",
            "type": "text",
            "required": true
          },
          {
            "id": "step_description",
            "text": "Step description",
            "type": "text",
            "required": false
          }
        ]
      }
    },
    {
      "id": "rework_exists",
      "text": "Does this process include any rework, recycling, or reprocessing steps?",
      "type": "boolean",
      "required": true,
      "conditional_questions": [
        {
          "id": "rework_description",
          "text": "Description of rework, recycling, or reprocessing",
          "type": "text",
          "required": true,
          "show_if": true
        }
      ]
    },
    {
      "id": "diagram_verified",
      "text": "Has the process flow diagram been verified on-site?",
      "tooltip": "On-site verification involves walking through the process to ensure the diagram accurately reflects reality.",
      "type": "boolean",
      "required": true
    }
  ]
}
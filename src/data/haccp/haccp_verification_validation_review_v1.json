{
  "version": "1.0.0",
  "locked": true,
  "section": "Verification, Validation, Review & Records",
  "questions": [
    {
      "id": "validation_group",
      "text": "Plan Validation Status",
      "type": "group",
      "questions": [
        {
          "id": "is_validated",
          "text": "Has this HACCP plan been previously validated?",
          "tooltip": "Validation uses scientific evidence to prove your control measures actually work. New plans are typically 'Not yet validated'.",
          "type": "boolean",
          "required": true,
          "conditional_questions": [
            {
              "id": "validation_date",
              "text": "Date of last validation",
              "type": "text",
              "required": true,
              "placeholder": "DD/MM/YYYY",
              "show_if": true
            },
            {
              "id": "validated_by",
              "text": "Who validated the plan?",
              "type": "text",
              "required": true,
              "placeholder": "Name or Role (e.g. Food Safety Consultant)",
              "show_if": true
            }
          ]
        }
      ]
    },
    {
      "id": "verification_group",
      "text": "Verification",
      "type": "group",
      "questions": [
        {
          "id": "system_verification_activities",
          "text": "What verification activities are performed to confirm the HACCP system is working?",
          "tooltip": "Verification = Checking if you are following the plan (e.g., reviewing records, internal audits). Validation = Proving the plan works.",
          "type": "text",
          "required": true,
          "placeholder": "e.g., Weekly record review, Annual internal audit, microbiological testing"
        },
        {
          "id": "system_verification_frequency",
          "text": "Verification frequency",
          "type": "text",
          "required": true,
          "placeholder": "e.g., Weekly, Monthly, Annually"
        },
        {
          "id": "system_verification_responsibility",
          "text": "Who is responsible for verification?",
          "type": "text",
          "required": true,
          "placeholder": "e.g., QA Manager, Head Chef"
        }
      ]
    },
    {
      "id": "review_group",
      "text": "Review",
      "type": "group",
      "questions": [
        {
          "id": "review_frequency",
          "text": "How often is the HACCP plan reviewed?",
          "type": "multi_select",
          "options": [
            "Annually",
            "After process change",
            "After incident or recall",
            "After audit findings"
          ],
          "required": true
        },
        {
          "id": "review_triggers",
          "text": "What events trigger a HACCP plan review?",
          "type": "multi_select",
          "options": [
            "Annually",
            "After process change",
            "After incident or recall",
            "After audit findings"
          ],
          "required": true
        }
      ]
    },
    {
      "id": "records_group",
      "text": "Records & Document Control",
      "type": "group",
      "questions": [
        {
          "id": "record_storage_location",
          "text": "Where are HACCP records stored?",
          "type": "text",
          "required": true,
          "placeholder": "e.g., Manager's Office, Cloud Drive, Kitchen Binder"
        },
        {
          "id": "record_retention_period",
          "text": "Record retention period",
          "type": "text",
          "required": true,
          "placeholder": "e.g., 12 months, 3 years"
        },
        {
          "id": "document_control_method",
          "text": "How are documents controlled and updated?",
          "type": "text",
          "required": true,
          "placeholder": "e.g., Version numbers, Date markings, Old copies destroyed"
        }
      ]
    },
    {
      "id": "traceability_group",
      "text": "Traceability & Recall (Regulation 178/2002 Art. 18–19)",
      "description": "EC Regulation 178/2002 requires food businesses to trace raw materials one step back and finished products one step forward, and to have documented recall/withdrawal procedures.",
      "type": "group",
      "questions": [
        {
          "id": "batch_coding_method",
          "text": "How are your products batch-coded or lot-numbered?",
          "tooltip": "Batch/lot coding is essential for targeted recalls. Without it, a recall may require withdrawing ALL product rather than a specific batch.",
          "type": "single_select",
          "options": [
            "Date code (e.g., DDMMYY)",
            "Sequential lot number",
            "Production run ID",
            "Combination (date + line + sequence)",
            "No batch coding in place"
          ],
          "required": true
        },
        {
          "id": "batch_code_example",
          "text": "Example batch code format",
          "type": "text",
          "required": false,
          "placeholder": "e.g., 060225-L1-001 (date-line-sequence)"
        },
        {
          "id": "supplier_traceability",
          "text": "Can you trace each raw material/ingredient back to its supplier and delivery batch?",
          "tooltip": "Article 18(2) — 'one step back': you must be able to identify who supplied each ingredient and when.",
          "type": "boolean",
          "required": true,
          "conditional_questions": [
            {
              "id": "method",
              "text": "How is supplier traceability achieved?",
              "type": "text",
              "required": true,
              "show_if": true,
              "placeholder": "e.g., Delivery notes retained, supplier CoAs filed, digital goods-in log"
            }
          ]
        },
        {
          "id": "customer_traceability",
          "text": "Can you trace finished products forward to the immediate customer or point of sale?",
          "tooltip": "Article 18(3) — 'one step forward': you must be able to identify who you supplied product to.",
          "type": "boolean",
          "required": true,
          "conditional_questions": [
            {
              "id": "method",
              "text": "How is customer/forward traceability achieved?",
              "type": "text",
              "required": true,
              "show_if": true,
              "placeholder": "e.g., Dispatch records, delivery manifests, POS system"
            }
          ]
        },
        {
          "id": "recall_procedure_documented",
          "text": "Is there a documented product recall/withdrawal procedure?",
          "tooltip": "Article 19 requires food businesses to have procedures to withdraw unsafe products from the market and notify competent authorities.",
          "type": "boolean",
          "required": true
        },
        {
          "id": "recall_last_tested",
          "text": "When was the recall procedure last tested (mock recall)?",
          "tooltip": "Best practice (BRC/SALSA/ISO 22000) recommends testing recall procedures at least annually via a mock recall exercise.",
          "type": "text",
          "required": false,
          "placeholder": "e.g., March 2025, Not yet tested"
        },
        {
          "id": "recall_coordinator",
          "text": "Who is responsible for initiating a product recall?",
          "type": "text",
          "required": true,
          "placeholder": "e.g., QA Manager, Business Owner, HACCP Team Leader"
        }
      ]
    }
  ],
  "rules": [
    "Verification and review must be ongoing",
    "Output must support audit traceability"
  ]
}